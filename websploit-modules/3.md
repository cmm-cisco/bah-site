---
title: Active Reconnaissance
layout: module
---

# Active Reconnaissance

## Exercise 1: Nmap

Nmap (Network Mapper) is a free and open-source network scanner that can be used to discover hosts and services on a computer network, thus creating a "map" of the network. It can also be used to scan for open ports and services, and to identify the operating system and version of the target systems. Nmap is a powerful tool that can be used for a variety of purposes, including network security auditing, network inventory, and network troubleshooting. It is a popular tool among both security professionals and system administrators.

Omar Santos has created a "nmap cheat sheet" accessible at `https://h4cker.org/cheat/nmap`.

### Host Discovery (-sn)

Nmap has many types of scans, for varying levels of active recon. First, we will use `nmap -sn` to perform a "ping sweep" or "ping scan".

`nmap -sn` doesn't do any port scanning, it just sends ICMP Echo Request packets (or ARP requests for non-routed networks) to determine whether the hosts are online and responsive.

The `-sn` option effectively tells Nmap to skip the default behavior of performing a port scan after host discovery. Instead, it focuses solely on identifying which IP addresses are active, making it a useful first step in a more comprehensive network assessment. This type of scan is faster and less intrusive than a full port scan, reducing the network traffic generated and the likelihood of detection by intrusion detection systems (IDS) or alerting the targets about the reconnaissance activity.

Using `nmap -sn` is particularly valuable for mapping out live hosts on a network segment before conducting more detailed analyses on those hosts. It helps in prioritizing targets for further exploration and vulnerability assessment based on their availability.

On your Kali machine, there are several docker containers running as part of a program called `WebSploit` which we will be using. WebSploit is a training tool that runs many docker containers that are purposefully vulnerable to exploits.

Run a ping sweep of the WebSploit network, `10.6.6.0/24`.

`nmap -sn 10.6.6.0/24`

### TCP Connect Scan (-sT)

TCP Connect Scan uses the full TCP 3-way handshake to establish a connection to a host and see what ports are open, filtered, or closed. A port is filtered if there is no response from the host; usually this means it's been blocked by a firewall.

Run a TCP connect scan on one of the containers you discovered above. What open ports and programs do you see?

## Exercise 2: Advanced Nmap Scanning & NSE

Nmap provides the Nmap Scripting Engine (NSE), which allows users to create custom scripts that Nmap can run on hosts (e.g., do find hosts with a specific vulnerability). NSE scripts are written in Lua and have a `.nse` extension. There are many pre-installed with Nmap, and you can see a list of example scripts to download at `https://nmap.org/nsedoc`.

To use NSE, use the `--script` Nmap option.

### FTP Anonymous Login

We can use NSE to anonymously login to an available FTP server and check what files are being served, using the `FTP-anon.nse` script.

1. Perform a TCP connect scan on `10.6.6.23`. You should see that port 23, FTP, is open.

2. Run the `ftp-anon.nse` script on the host: `nmap --script ftp-anon.nse 10.6.6.23`. You should see a list of several available files.

3. You can also run the script on the entire network, if you want: `nmap --script ftp-anon.nse 10.6.6.0/24`

### Exporting Nmap Output

Nmap can output scans in various formats:

* The `-oN FILENAME` flag saves "normal" Nmap output to a file.
* The `-oX FILENAME` flag saves output as an XML file.
* The `-oG FILENAME` flag saves output as an easily-`grep`able file.
* The `-oA FILENAME` flag saves output as all formats.

## Exercise 3: DNS Reconnaissance

### Task 1

Do a [zone transfer](http://en.wikipedia.org/wiki/DNS_zone_transfer) of the **`pod.becomingahacker.com`** domain using the `dig` ([domain information groper](https://www.madboa.com/geek/dig/)) tool.

If the domain you want to query allows DNS zone transfers, you can get those, too. The reality of life on the Internet, however, is that very few domains allow unrestricted transfers these days, and limit zone transfers to secondary name server IPs. You'll learn how to bypass IP access control lists later in the course.

{% capture code %}
dig pod.becomingahacker.com NS

dig pod.becomingahacker.com AXFR
{% endcapture %}
{% include copy-paste.html title="Using dig" code=code %}
