<script src="/os_files/jquery.min.js"></script>
<script src="/os_files/bootstrap.min.js"></script>
<!-- <script src="/static/js/ZeroClipboard.js" type="text/javascript"></script> -->
<script src="/os_files/highlight.pack.js"></script>
<script type="text/javascript" src="/os_files/sijax.js"></script>
<script type="text/javascript" src="/os_files/cssterm.js"></script>
<script type="text/javascript" src="/os_files/clipboard.min.js"></script>
<script type="text/javascript" src="/os_files/bootstrap-select.min.js"></script>
<script type="text/javascript">
    Sijax.setRequestUri("/pod1/basics/os");Sijax.setJsonUri("/static/js/sijax/json2.js");
</script>


<script type="text/javascript">
	var urlParams;
	(window.onpopstate = function () {
			var match,
					pl     = /\+/g,  // Regex for replacing addition symbol with a space
					search = /([^&=]+)=?([^&]*)/g,
					decode = function (s) { return decodeURIComponent(s.replace(pl, " ")); },
					query  = window.location.search.substring(1);

			urlParams = {};
			while (match = search.exec(query))
				urlParams[decode(match[1])] = decode(match[2]);
	})();

	// Config ZeroClipboard
	//ZeroClipboard.config({
	//    hoverClass: 'btn-clipboard-hover'
	//})

	// Insert copy to clipboard button before .ciscohl
	//$('.ciscohl').each(function () {
	//    var btnHtml = '<div class="zero-clipboard"><span class="btn-clipboard">Copy</span></div>';
	//    $(this).before(btnHtml)
	//});

	function runit(codeid){
			var codeblock = "codeblock-" + codeid;
			var preblock =  "output-" + codeid;
			var outfixhtmlfunc = 'outputfixhtml' + codeid;
			var code = document.getElementById(codeblock).value;
		document.getElementById(preblock).innerHTML = '';
			Sk.configure({output:eval(outfixhtmlfunc) });
			eval(Sk.importMainWithBody("<stdin>", false, code));
	}





	//var zeroClipboard = new ZeroClipboard($('.btn-clipboard'));
	//var htmlBridge = $('#global-zeroclipboard-html-bridge');
	//
	//// Handlers for ZeroClipboard
	//zeroClipboard.on('ready', function (event) {
	//    htmlBridge
	//        .data('placement', 'top')
	//        .attr('title', 'Copy to clipboard')
	//        .tooltip();
	//    var ciscohl = $(event.target).parent().nextAll('.ciscohl').first();
	//    console.log(ciscohl);
	//
	//    // Copy to clipboard
	//    zeroClipboard.on('copy', function (event) {
	//        var ciscohl = $(event.target).parent().nextAll('.ciscohl').first();
	//        console.log ( ciscohl[0].id );
	//        var pod = urlParams["pod"];
	//        var section = urlParams["section"];
	//
	//        $.ajax({
	//	       //type: "GET",
	//	       url: "/dash/collect/pod/1/basics/os/" + ciscohl[0].id
	//	       // data:  "pod=" + pod + "&section=" + section + "&step=" + ciscohl[0].id
	//        });
	//        event.clipboardData.setData("text/plain", ciscohl.text());
	//         // $(event.target).parent().next(".ciscohl").css("background","#e0ffcb url('/static/images/ok.png') no-repeat top left / 45px 45px")
	//         $(event.target).parent().next(".ciscohl").css("background","#e0ffcb url('/static/images/ok.png') no-repeat bottom right / 45px 45px")
	//    });
	//
	//    // Notify copy success and reset tooltip title
	//    zeroClipboard.on('aftercopy', function () {
	//        htmlBridge
	//            .attr('title', 'Copied!')
	//            .tooltip('fixTitle')
	//            .tooltip('show')
	//            .attr('title', 'Copy to clipboard')
	//            .tooltip('fixTitle');
	//
	//    });
	//});
	//
	//function findPos(obj) {
	//    var curtop = 0;
	//    if (obj.offsetParent) {
	//        do {
	//            curtop += obj.offsetTop;
	//        } while (obj = obj.offsetParent);
	//    return [curtop];
	//    }
	//}
	//
	//
	//// Notify copy failure
	//zeroClipboard.on('error', function () {
	//    ZeroClipboard.destroy();
	//    htmlBridge
	//        .attr('title', 'Flash required')
	//        .tooltip('fixTitle')
	//        .tooltip('show');
	//});
	//

	///////////////////////////////////////////////////////////////////////////////
	// Start NEW COPY/PASTE Clipboard code.
	///////////////////////////////////////////////////////////////////////////////

	var clipboard = new Clipboard('.copybutton', {
			text: function(btn_object){
					var webcopy = $(btn_object).parent().nextAll('.ciscohl2').first();
					return webcopy[0].innerText + "\n\r";
			}
	});
	clipboard.on('success', function(e) {
			var webcopy = $(event.target).parent().nextAll('.ciscohl2').first();
			var pod = urlParams["pod"];
			var section = urlParams["section"];

			$.ajax({
					url: "/dash/collect/pod/1/basics/os/" + webcopy[0].id
			});
			$(event.target).parent().next(".ciscohl2").css("background","#e0ffcb url('/static/images/ok.png') no-repeat bottom right / 45px 45px")

			e.clearSelection();
	});
	///////////////////////////////////////////////////////////////////////////////
	// End COPY/PASTE Clipboard code.
	///////////////////////////////////////////////////////////////////////////////



	$(document).ready(function(){
		// cache the window object
		$window = $(window);

			$('.selectpicker').selectpicker({
						style: 'btn-default',
						size: 12
				});






			// $('pre code').each(function(i, block) {
			//     hljs.highlightBlock(block);
			// });

		$('section[data-type="background"]').each(function(){
			// declare the variable to affect the defined data-type
			var $scroll = $(this);

				$(window).scroll(function() {
					// HTML5 proves useful for helping with creating JS functions!
					// also, negative value because we're scrolling upwards
					var yPos = -($window.scrollTop() / $scroll.data('speed'));

					// background position
					var coords = '50% '+ yPos + 'px';

					// move the background
					$scroll.css({ backgroundPosition: coords });
				}); // end window scroll
		});  // end section function
	}); // close out script


</script>
